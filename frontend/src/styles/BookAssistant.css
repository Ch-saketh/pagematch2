/* src/styles/BookAssistant.css */

/* General Body and Main Container Styling */
body {
  margin: 0;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background-color: #000; /* Dark background for the entire page */
  color: #fff; /* Default text color */
  overflow: hidden; /* Prevent body scroll if content overflows, crucial for full-height layouts */
}

.main-container {
  display: flex;
  height: 100vh; /* Full viewport height */
  width: 100vw; /* Full viewport width */
  background-color: #000;
  overflow: hidden;
  padding-top: 70px; /* Space for the fixed Navbar */
  box-sizing: border-box; /* Include padding in element's total height */
}

/* Sidebar Styling */
.sidebar {
  background-color: #1a1a1a; /* Dark background for the sidebar */
  color: #ddd;
  padding-top: 70px; /* Aligns content below the Navbar when sidebar is open */
  box-sizing: border-box;
  transition: transform 0.3s ease-in-out; /* Smooth slide animation */
  overflow-x: hidden; /* Hide horizontal scrollbar */
  flex-shrink: 0;
  display: flex;
  flex-direction: column; /* Stack items vertically */
  position: fixed; /* Fixed position relative to the viewport */
  height: 100%; /* Full height of the viewport */
  width: 280px; /* Fixed width for the sidebar when open */
  left: 0;
  top: 0;
  transform: translateX(-100%); /* Initially hide by moving entirely to the left */
  z-index: 999; /* Ensures it's above main content but below the Navbar */
  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5); /* Subtle shadow for depth */
}

.sidebar.open {
  transform: translateX(0); /* Slides the sidebar into view */
}

/* Sidebar Overlay Backdrop */
.sidebar-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black for dimming effect */
  z-index: 998; /* Below sidebar, above main content */
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
}

/* Make overlay visible when sidebar is open */
.sidebar.open + .sidebar-overlay { 
  opacity: 1;
  visibility: visible;
}

.sidebar-header {
  display: flex;
  align-items: center;
  margin-bottom: 20px;
  padding: 0 10px;
  min-height: 40px; /* Ensures header has a minimum height */
}

.sidebar-header h2 {
  margin: 0 0 0 10px;
  font-size: 1.5em;
  color: #fff;
  white-space: nowrap; /* Prevent text from wrapping */
}

/* Sidebar Toggle Button */
.sidebar-toggle-btn {
  position: absolute; /* Positioned relative to its parent `.assistant-container` */
  top: 90px; /* Adjust based on Navbar height and desired spacing */
  left: 20px; /* Position on the left edge of the main content area */
  background: none;
  border: none;
  color: #fff;
  font-size: 1.8em; /* Larger icon size */
  cursor: pointer;
  z-index: 1000; /* Ensure it's above everything else, including the sidebar and overlay */
  padding: 5px;
  border-radius: 5px;
  transition: color 0.2s ease, background-color 0.2s ease;
}

.sidebar-toggle-btn:hover {
  color: #007bff; /* Blue hover effect */
  background-color: rgba(255, 255, 255, 0.1); /* Subtle background on hover */
}

/* Search History List in Sidebar */
.search-history {
  list-style: none;
  padding: 0;
  margin: 0;
  flex-grow: 1; /* Allows the list to take up available space and push button to bottom */
  overflow-y: auto; /* Enable vertical scrolling if history is long */
  padding-right: 5px; /* Space for the scrollbar */
}

/* Custom Scrollbar for Search History */
.search-history::-webkit-scrollbar {
  width: 8px;
}

.search-history::-webkit-scrollbar-track {
  background: #2a2a2a;
  border-radius: 4px;
}

.search-history::-webkit-scrollbar-thumb {
  background: #555;
  border-radius: 4px;
}

.search-history::-webkit-scrollbar-thumb:hover {
  background: #777;
}

.search-history li {
  padding: 10px 15px;
  margin-bottom: 5px;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.2s ease;
  white-space: nowrap; /* Prevent text from wrapping to keep single line history items */
  overflow: hidden; /* Hide overflowing text */
  text-overflow: ellipsis; /* Add "..." for overflowing text */
}

.search-history li:hover {
  background-color: #333;
}

.search-history .no-history {
  color: #888;
  font-style: italic;
  text-align: center;
  padding: 20px;
}

/* New Chat Button in Sidebar */
.new-chat-button {
  background-color: #007bff; /* Blue button */
  color: white;
  border: none;
  padding: 10px 15px;
  border-radius: 25px;
  cursor: pointer;
  font-size: 1em;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-top: 20px;
  width: calc(100% - 20px); /* Adjust width for padding in sidebar */
  align-self: center; /* Center the button horizontally in the sidebar */
  transition: background-color 0.2s ease;
}

.new-chat-button:hover {
  background-color: #0056b3;
}

/* Main Assistant Content Container */
.assistant-container {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  /* changed justify-content to space-between to push input/buttons to bottom */
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  background-color: #000;
  position: relative;
}
/* Welcome Message */
.center-welcome {
  /* No longer flex-grow: 1 here. It will center itself */
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  flex-grow: 1; /* Keep flex-grow here to push content when no messages */
  margin-bottom: 20px; /* Add some space above buttons if visible */
}

.gradient-text {
  font-size: 3em;
  font-weight: bold;
  background: linear-gradient(to right, #6a5acd, #e6007e); /* Blue to Pink Gradient */
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: pulse 2s infinite alternate; /* Subtle pulsing animation */
}

@keyframes pulse {
  0% { transform: scale(1); }
  100% { transform: scale(1.05); }
}

/* Chat Box Styling */
.chat-box {
  width: 100%;
  max-width: 900px;
  margin: 0 auto;
  overflow-y: auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  flex-grow: 1; /* Keep flex-grow here to push input/buttons down when messages present */
  /* This display is now controlled by the :has selector below */
}

/* Custom Scrollbar for Chat Box */
.chat-box::-webkit-scrollbar {
  width: 8px;
}

.chat-box::-webkit-scrollbar-track {
  background: #2a2a2a;
  border-radius: 4px;
}

.chat-box::-webkit-scrollbar-thumb {
  background: #555;
  border-radius: 4px;
}

.chat-box::-webkit-scrollbar-thumb:hover {
  background: #b1a0a0;
}

.chat-bubble {
  padding: 1rem 1.2rem;
  border-radius: 16px;
  max-width: 90%;
  line-height: 1.6;
  font-size: 1rem;
  animation: fadeIn 0.3s ease-in-out;
  word-wrap: break-word;
  box-shadow: 0 4px 12px rgba(179, 27, 27, 0.1);
  display: flex;
  gap: 0.75rem;
  overflow-wrap: anywhere; /* ðŸ”¥ CRUCIAL */
  white-space: pre-wrap;
}

.chat-bubble.bot {
  background: rgba(68, 69, 69, 0.05);
  color: #eee;
  align-self: flex-start;
  border: 1px solid rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(10px);
}

.chat-bubble.bot {
  background: rgba(239, 232, 232, 0.05);
  color: #eee;
  align-self: flex-start;
  border: 1px solid rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(10px);
}

.chat-bubble.typing {
  background-color: #343131;
  color: #eee;
  font-style: italic;
}
.chat-image {
  max-width: 100%;
  border-radius: 8px;
  margin-top: 0.5rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

/* Action Buttons (above input area) */
.action-buttons {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px; /* Add margin-top instead of margin-bottom */
  margin-bottom: 20px; /* Adjust this to control space between buttons and input */
  width: 100%;
  max-width: 700px;
  /* Align self to end to ensure it stays at bottom along with input */
  align-self: center;
}
.action-buttons button {
  background-color: #333;
  color: #fff;
  border: 1px solid #555;
  padding: 12px 25px;
  border-radius: 30px; /* Highly rounded buttons */
  cursor: pointer;
  font-size: 0.9em;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: background-color 0.2s ease, border-color 0.2s ease;
}

.action-buttons button:hover {
  background-color: #555;
  border-color: #777;
}

/* Input Area */
.input-area {
  display: flex;
  width: 100%;
  max-width: 900px;
  background-color: #1a1a1a;
  border-radius: 30px;
  padding: 10px 20px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  /* Removed margin-top: auto; from here */
  align-items: center;
}

.input-area input {
  flex-grow: 1; /* Allows input field to take up most of the space */
  border: none;
  background: none;
  outline: none; /* Removes focus outline */
  color: #fff;
  font-size: 1em;
  padding: 8px 10px;
}

.input-area input::placeholder {
  color: #aaa;
}

.input-area button {
  background: none;
  border: none;
  color: #fff;
  font-size: 1.2em;
  cursor: pointer;
  padding: 8px;
  margin-left: 10px;
  transition: color 0.2s ease;
}

.input-area button:hover {
  color: #007bff; /* Blue on hover */
}

.mic-button {
  color: #e6007e !important; /* Distinct pink color for microphone */
}

/* Conditional Display of Welcome Message vs. Chat Box */
/* Hides .center-welcome and shows .chat-box when messages or typing indicator are present */
.assistant-container:has(.chat-box .chat-bubble),
.assistant-container:has(.chat-box .typing) {
  .center-welcome {
    display: none;
  }
  .chat-box {
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-width: 720px;
  margin: 0 auto;
}
}

/* Navbar specific styles */
.navbar-container {
    width: 100%;
    background-color: #1a1a1a; /* Dark bar for Navbar */
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: fixed; /* Makes Navbar stick to the top */
    top: 0;
    left: 0;
    z-index: 1000; /* Ensures Navbar is on top of everything else */
    height: 40px; /* Explicit height, matches padding-top in main-container */
}

.navbar-logo {
    font-size: 1.8em;
    font-weight: bold;
    color: #fff;
    background: linear-gradient(to right, #fff, #e6007e); /* White to Pink Gradient for Pagesearch logo */
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.navbar-nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    gap: 25px;
}

.navbar-nav li a {
    color: #fff;
    text-decoration: none;
    font-size: 1em;
    padding: 5px 0;
    transition: color 0.2s ease;
}

.navbar-nav li a:hover {
    color: #007bff; /* Blue hover effect for navigation links */
}

.navbar-right {
    display: flex;
    align-items: center;
    gap: 20px;
}

.navbar-search-icon, .navbar-profile-icon {
    color: #fff;
    font-size: 1.3em;
    cursor: pointer;
}
.assistant-container:not(:has(.chat-box .chat-bubble)):not(:has(.chat-box .typing)) {
    .action-buttons {
        margin-top: auto; /* Push action buttons to bottom if only welcome text */
        margin-bottom: 20px; /* Space from input */
    }
}
.chat-image {
  max-width: 100%;
  height: auto;
  margin-top: 0.5rem;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.25);
}

.chat-bubble {
  padding: 1rem 1.2rem;
  border-radius: 16px;
  max-width: 90%;
  line-height: 1.6;
  font-size: 1rem;
  animation: fadeIn 0.3s ease-in-out;
  word-wrap: break-word;
  overflow-wrap: anywhere;
  white-space: pre-wrap;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  display: block; /* not flex! */
}

code {
  background-color: #222;
  color: #ffcc00;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: monospace;
}

pre code {
  display: block;
  padding: 1rem;
  border-radius: 8px;
  background-color: #1e1e1e;
  color: #eee;
  overflow-x: auto;
}

.avatar {
  font-size: 1.4rem;
  margin-top: 0.2rem;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
.chat-box {
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-width: 720px;
  margin: 0 auto;
  word-wrap: break-word;
}

.chat-bubble pre {
  background-color: #5c5858;
  border-radius: 8px;
  padding: 1rem;
  overflow-x: auto;
  max-width: 100%;
}

.chat-bubble code {
  word-wrap: break-word;
  font-size: 0.95rem;
}

img.chat-image {
  max-width: 100%;
  border-radius: 10px;
  margin-top: 0.5rem;
  height: auto;
}
